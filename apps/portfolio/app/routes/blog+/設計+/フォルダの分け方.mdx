# フォルダの分け方

## Contents

## コンポーネント分離

### horizontal
* ドメインの補題分割によるコンポーネント
* 人に例えた時、それぞれの役割を担う人々
* 特別な理由がない場合horizontalに分ける努力をする

### vertical
* 複数個所で出現する共通部分をまとめたもの: model, hook, wrapper, util, gateway, middleware
    * これらのコンポーネントはhorizontalな分割においては特定の役割に限定し辛い場合や冗長になる場合がある
* 横断的な関心毎: entrypoint, kernel
    * 一般的すぎる役割
* まとめた方が分かりやすくなるもの: dbadapter
    * infraやフレームワークを使ったドメインの実装では、infraが変わると丸ごと入れ替わる、特にdbadapter等頻出するものについて、独立したmoduleを作ってhorizontalにまとめる方がいい

## フォルダの切り方

### **手順**

#### **ステップ 1: ドメインツリーの構築**
- **目的**: サービスの完成をルートノードとし、ドメインやサブドメインを定義する。
- **手順**: 再帰的な補題分轄を行いドメインツリーを構築、各ドメインやサブドメインをディレクトリ構成に反映する。
    - サービスの完成をルートノードとして捉える
    - ルートノードの実現に必要な主要な機能を大きなサブドメインとして定義する
    - 再帰的にサブドメインへの分轄を行う
    
#### **ステップ 2: 2つのルールの適用**

以下の2つのルールを各サブドメインで適用する

- **ルール 1: 共通化されたモジュールの定義**
  - **条件**: 複数のドメインで共通して利用される機能やリソースが存在する。
  - **処理**: その機能やリソースを表す概念をフォルダとして定義し、共通化されたモジュールとする。
- **ルール 2: 専門家による実装のまとめ**
  - **条件**: 同じ技術や専門知識を必要とする実装が複数のドメインで存在する。
  - **処理**: その実装を専門家が管理する具体的な名前のフォルダにまとめる。
  
#### **ステップ 3: 横断的な関心事のフォルダを作る**

entrypoint, kernel, gateway等
